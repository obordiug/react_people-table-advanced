(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{22:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(15),s=c.n(n),a=c(8),r=c(0),l=c.n(r),o=c(3),i=(c(22),c(7)),j=c(1),b=l.a.createContext({people:[],setPeople:function(){},visiblePeople:[],setVisiblePeople:function(){}}),d=function(e){var t=e.children,c=Object(r.useState)([]),n=Object(i.a)(c,2),s=n[0],a=n[1],l=Object(r.useState)([]),o=Object(i.a)(l,2),d=o[0],u=o[1];Object(r.useEffect)((function(){fetch("".concat("https://mate-academy.github.io/react_people-table/api/people.json")).then((function(e){return e.ok?e.json():Promise.reject(new Error("".concat(e.status," - ").concat(e.statusText)))})).then((function(e){a(e)}))}),[]);var m=Object(r.useMemo)((function(){return{people:s,setPeople:a,visiblePeople:d,setVisiblePeople:u}}),[s,d]);return Object(j.jsx)(b.Provider,{value:m,children:t})},u=(c(24),function(){return Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("nav",{className:"nav",children:[Object(j.jsx)(a.b,{className:"nav__link",to:"/",children:"Home page"}),Object(j.jsx)(a.b,{className:"nav__link",to:"/people",children:"People page"})]})})}),m=(c(25),function(){return Object(j.jsx)("h1",{className:"home-title",children:"Home page"})}),p=c(16),O=(c(28),c(29),c(13)),h=c.n(O),f=(c(30),c(31),function(e){var t=e.person,c=t.name,n=t.slug,s=t.sex,r=Object(o.f)().search;return Object(j.jsx)(a.b,{to:{pathname:"".concat("/people/".concat(n)),search:r},className:h()("personName-link",{"personName-link--female":"f"===s,"personName-link--male":"m"===s}),children:c})}),x=function(e){var t=e.person,c=Object(r.useContext)(b).people,n=Object(r.useMemo)((function(){return c.find((function(e){return e.name===t.motherName}))}),[c]),s=Object(r.useMemo)((function(){return c.find((function(e){return e.name===t.fatherName}))}),[c]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{className:"cell",children:Object(j.jsx)(f,{person:t})}),Object(j.jsx)("td",{className:"cell cell-center",children:t.sex}),Object(j.jsx)("td",{className:"cell cell-center",children:t.born}),Object(j.jsx)("td",{className:"cell cell-center",children:t.died}),n?Object(j.jsx)("td",{className:"cell",children:Object(j.jsx)(f,{person:n})}):Object(j.jsx)("td",{className:"cell cell-bold",children:t.motherName||"no data"}),s?Object(j.jsx)("td",{className:"cell",children:Object(j.jsx)(f,{person:s})}):Object(j.jsx)("td",{className:"cell cell-bold",children:t.fatherName||"no data"})]})},v=function(){var e=Object(r.useContext)(b),t=e.people,c=e.visiblePeople,n=Object(o.h)().slug,s=Object(o.f)().search,l=Object(a.c)(s),d=Object(i.a)(l,2),u=d[0],m=d[1],p=u.get("sortBy")||"",O=u.get("sortOrder")||"",f=t.length>0?Object.keys(t[0]).splice(0,4):[],v=Object(r.useMemo)((function(){if(p)switch(p){case"name":case"sex":return"asc"===O?c.sort((function(e,t){return e[p].localeCompare(t[p])})):c.sort((function(e,t){return t[p].localeCompare(e[p])}));case"born":case"died":return"asc"===O?c.sort((function(e,t){return e[p]-t[p]})):c.sort((function(e,t){return t[p]-e[p]}))}return c}),[c,p,O]);return Object(j.jsxs)("table",{className:"peopleTable",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"peopleTable__header",children:[f.map((function(e){return Object(j.jsx)("th",{onClick:function(){return function(e){u.set("sortBy",e),u.set("sortOrder","asc"===O&&p===e?"desc":"asc"),m(u)}(e)},className:h()("peopleTable__cell-filter",{"peopleTable__cell-filter--asc":"asc"===O&&p===e,"peopleTable__cell-filter--desc":"desc"===O&&p===e}),children:e[0].toUpperCase()+e.slice(1)},e)})),Object(j.jsx)("th",{className:"peopleTable__cell",children:"Mother"}),Object(j.jsx)("th",{className:"peopleTable__cell",children:"Father"})]})}),Object(j.jsx)("tbody",{children:v.map((function(e){return Object(j.jsx)("tr",{className:h()({peopleTable__row:e.slug===n}),children:Object(j.jsx)(x,{person:e})},e.slug)}))})]})},_=function(){var e=Object(r.useContext)(b),t=e.people,c=e.setVisiblePeople,n=Object(o.f)().search,s=Object(a.c)(n),l=Object(i.a)(s,2),d=l[0],u=l[1],m=d.get("query")||"",O=Object(r.useState)(m),h=Object(i.a)(O,2),f=h[0],x=h[1],_=Object(r.useCallback)(Object(p.debounce)((function(e){e?d.set("query",e):d.delete("query"),u(d)}),500),[d]);return Object(r.useEffect)((function(){c(m?t.filter((function(e){var t,c;return e.name.toLowerCase().includes(m.toLowerCase())||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(m.toLowerCase()))})):t)}),[t,m]),Object(j.jsxs)("div",{className:"people-page",children:[Object(j.jsx)("h1",{className:"people-page__title",children:"People Page"}),Object(j.jsx)("input",{type:"text",className:"people-page__search",placeholder:"Enter a name",value:f,onChange:function(e){x(e.target.value),_(e.target.value)}}),Object(j.jsx)(a.b,{className:"people-page__link",to:"/people/new",children:"Add person"}),Object(j.jsx)(v,{})]})},N=(c(32),function(){return Object(j.jsx)("h1",{className:"notFound-title",children:"Page not found"})}),g=c(4),y=c(2),w=c(17),C=(c(33),function(){var e,t,c,n,s=Object(r.useContext)(b),a=s.people,l=s.setPeople,i=(new Date).getFullYear(),d=Object(o.g)(),u=Object(w.a)({mode:"onBlur"}),m=u.register,p=u.watch,O=u.formState,h=O.errors,f=O.isValid,x=u.handleSubmit,v=u.reset,_=Object(r.useMemo)((function(){return a.filter((function(e){return"f"===e.sex&&+p("born")<e.died}))}),[a,+p("born")]),N=Object(r.useMemo)((function(){return a.filter((function(e){return"m"===e.sex&&+p("born")<e.died}))}),[a,+p("born")]);return Object(j.jsx)("div",{className:"container-form",children:Object(j.jsxs)("form",{className:"form",onSubmit:x((function(e){var t=Object(y.a)(Object(y.a)({},e),{},{born:+e.born,died:+e.died,slug:"".concat(e.name.toLowerCase().split(" ").join("-"),"-").concat(e.born)});l([].concat(Object(g.a)(a),[t])),v(),d("/people")})),children:[Object(j.jsxs)("label",{children:["Name",Object(j.jsx)("input",Object(y.a)({type:"text",className:"form__input"},m("name",{required:{value:!0,message:"This field is required"},pattern:{value:/^[A-Za-z\s]+$/i,message:"Only letters and spaces"}})))]}),Object(j.jsx)("div",{className:"form__error",children:(null===h||void 0===h?void 0:h.name)&&Object(j.jsx)("p",{children:null===h||void 0===h||null===(e=h.name)||void 0===e?void 0:e.message})}),Object(j.jsxs)("div",{className:"form__radio",children:[Object(j.jsxs)("label",{children:["Female",Object(j.jsx)("input",Object(y.a)({type:"radio",className:"form__radio-item",value:"f"},m("sex",{required:{value:!0,message:"This field is required"}})))]}),Object(j.jsxs)("label",{children:["Male",Object(j.jsx)("input",Object(y.a)({type:"radio",className:"form__radio-item",value:"m"},m("sex",{required:{value:!0,message:"This field is required"}})))]})]}),Object(j.jsx)("div",{className:"form__error",children:(null===h||void 0===h?void 0:h.sex)&&Object(j.jsx)("p",{children:null===h||void 0===h||null===(t=h.sex)||void 0===t?void 0:t.message})}),Object(j.jsxs)("label",{children:["Born",Object(j.jsx)("input",Object(y.a)({type:"number",className:"form__input"},m("born",{required:{value:!0,message:"This field is required"},min:{value:1400,message:"Enter year between 1400 and the ".concat(i," year")},max:{value:i,message:"Enter year between 1400 and the ".concat(i," year")},validate:function(e){return e<=+p("died")}})))]}),Object(j.jsxs)("div",{className:"form__error",children:[(null===h||void 0===h?void 0:h.born)&&Object(j.jsx)("p",{children:null===h||void 0===h||null===(c=h.born)||void 0===c?void 0:c.message}),+p("died")<+p("born")&&Object(j.jsx)("p",{children:"Year of died less than year of born"})]}),Object(j.jsxs)("label",{children:["Died",Object(j.jsx)("input",Object(y.a)({type:"number",className:"form__input",disabled:!p("born")},m("died",{required:"This field is required",min:{value:1400,message:"Enter year between 1400 and the ".concat(i," year")},max:{value:+p("born")+150,message:"A person cannot be over 150 years old"},validate:function(e){return e<=i}})))]}),Object(j.jsxs)("div",{className:"form__error",children:[(null===h||void 0===h?void 0:h.died)&&Object(j.jsx)("p",{children:null===h||void 0===h||null===(n=h.died)||void 0===n?void 0:n.message}),+p("died")>i&&Object(j.jsx)("p",{children:"The year of died cannot be greater than the current year"})]}),Object(j.jsxs)("label",{children:["MotherName",Object(j.jsxs)("select",Object(y.a)(Object(y.a)({className:"form__input form__input--select",disabled:!p("born")},m("motherName")),{},{children:[Object(j.jsx)("option",{}),_.map((function(e){return Object(j.jsx)("option",{children:e.name},e.slug)}))]}))]}),Object(j.jsxs)("label",{children:["FatherName",Object(j.jsxs)("select",Object(y.a)(Object(y.a)({className:"form__input form__input--select",disabled:!p("born")},m("fatherName")),{},{children:[Object(j.jsx)("option",{}),N.map((function(e){return Object(j.jsx)("option",{children:e.name},e.slug)}))]}))]}),Object(j.jsx)("button",{type:"submit",className:"form__submit",disabled:!f,children:"Add person"})]})})}),P=function(){return Object(j.jsx)(d,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/",element:Object(j.jsx)(m,{})}),Object(j.jsx)(o.b,{path:"people",element:Object(j.jsx)(_,{}),children:Object(j.jsx)(o.b,{path:":slug",element:Object(j.jsx)(_,{})})}),Object(j.jsx)(o.b,{path:"people/new",element:Object(j.jsx)(C,{})}),Object(j.jsx)(o.b,{path:"home",element:Object(j.jsx)(o.a,{to:"/",replace:!0})}),Object(j.jsx)(o.b,{path:"*",element:Object(j.jsx)(N,{})})]})]})})};s.a.render(Object(j.jsx)(a.a,{children:Object(j.jsx)(P,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.ec9b4cba.chunk.js.map